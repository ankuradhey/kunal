<link href="<?php echo $this->cdn("/css/website/profile.css"); ?>" rel="stylesheet">
<script>
<?php
if (null != $userObj->getEmail() && $userObj->getEmail() != '') {
    if (!isset($_SESSION['user']['boardId'])) {
        ?>
            $(document).ready(function() {
                return boardClassPopup('<?php echo $userObj->getEmail(); ?>', '<?php echo $userObj->getPassword(); ?>', 'Student');
            });
        <?php
    }
}
?>
</script>

<style type="text/css">
    #user-my-mentor_form .select-wrappers select{height:36px;}
    #user-my-mentor_form .select-wrappers .holders{margin-top:-35px;}
</style>

<?php if ($this->zfcUserIdentity()) { ?>
    <!--Content section start here-->
    <div id="content" class="profile-pages">
        <div class="container">
            <div class="row">
                <div class="myprofile-content">
                    <div class="profile-view globle-click clearfix">
                        <strong>Add Mentor</strong>
                        <i class="icons-ar"></i>	
                    </div>
                    <?php echo $this->partial('user/index/profile-menu.phtml', array('page' => 'myMentor', 'addedmentors' => count($addedMentors), 'addedStudents' => count($addedStudents))); ?>
                    <section class="profile-block">
                        <div class="add-member clearfix">
                            <input type="hidden" value="nav_5" id="nav_find">
                            <a href="javascript:void(0)" id="add-mentor-tog"><i class="icons-plus img-circle"></i> Add Mentor</a>
                            <div class="editmentor_button">
                                <a href="<?php echo $this->Url('myassignedpaper'); ?>" class="btn btn-primary">Test List</a>	
                            </div>
                        </div>
                        <div class="form-block addmentor-form">
                            <form class="form-horizontal" id="user-my-mentor_form" method="post">
                                <span class="errorfrm_mentor" id="succussesMessageload"></span>
                                <div class="errorfrm_mymentor" id="errorRelationship">&nbsp;</div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Name<sup>*</sup></label>
                                    <div class="col-xs-12 col-sm-10">
                                        <div class="col-xs-3 col-sm-2 mentor-select">
                                            <select class="select" name="gender">
                                                <option value="">Mr.</option>
                                                <option value="">Ms.</option>
                                            </select>	
                                        </div>	
                                        <div class="col-xs-9 col-sm-5 h-width">	
                                            <input id="Mentor_Name"  type="text" name="Mentor_Name" class="form-control" placeholder="Please enter mentor name">
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="errorfrm_mymentor" id="errorMentor_Name">&nbsp;</div>
                                    </div>

                                </div>
                                
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Email<sup>*</sup></label>
                                    <div class="col-sm-5 f-width">	
                                        <input type="email" id="Mentor_Email" name="Mentor_Email"  class="form-control" placeholder="Please enter mentor email address">
                                        <div class="clearfix"></div>
                                         <div class="errorfrm_mymentor" id="erroremail">&nbsp;</div>
                                    </div>
                                </div>
                                <input type="hidden" id="Mentor_phone_id" name="Mentor_phone_id" value="">
                               
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Board<sup>*</sup></label>
                                    <div class="col-sm-5 f-width">	
                                        <select class="select" name="board_id" id="board_id">
                                            <option value="0">Select a board </option>
                                            <?php
                                            if (count($this->boards)) {
                                                foreach ($this->boards as $key=>$boards) {
                                                    ?>
                                                    <option value="<?php echo $boards[0]['customBoard']['customBoardId'] ?>"><?php echo $boards[0]['customBoard']['boardName'] ?></option>
                                                    <?php
                                                }
                                            }
                                            ?>
                                        </select>
                                        <div class="clearfix"></div>
                                       <div class="errorfrm_mymentor" id="errormentorBoard">&nbsp;</div>
                                    </div>
                                </div>
                                

                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Class<sup>*</sup></label>
                                    <div class="col-sm-5 f-width" id="selectedClass">	
                                        <select class="select" name="class_id" id="class_id">
                                            <option selected="selected" value="0">Select a Class</option>
                                            
                                        </select>
                                         <div class="clearfix"></div>
                                          <div class="errorfrm_mymentor" id="errormentorClass">&nbsp;</div>
                                    </div>
                                </div>
                               

                                <div class="form-group">
                                    <label class="col-sm-2 control-label hidden-xs">&nbsp;</label>
                                    <div class="col-sm-5 f-width">	
                                        <div class="radio-box">
                                            <input type="radio" name="subject_type" id="subscribed" value="subscribed" checked/>
                                            <label for="subscribed">Subscribed Subjects</label>	
                                        </div>
                                        <div class="radio-box">
                                            <input type="radio" name="subject_type" id="all" value="all" />
                                            <label for="all">All Subjects</label>	
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Subject<sup>*</sup></label>
                                    <div class="col-sm-5 f-width">	
                                        <select name="mentor_subject" class="form-control" id="mentor_subject" multiple="multiple" >
                                            <option value="" selected>Select Subject</option>
                                            <?php
                                            if(count($this->subjectdetails) != 0) {
                                                foreach ($this->subjectdetails as $subjectdetails) { ?>									
                                                    <option value="<?php echo $subjectdetails->board_class_subject_id; ?>"><?php echo $subjectdetails->subject_name; ?></option>
                                                    <?php
                                                }
                                            }
                                            ?> 
                                        </select>
                                        <div class="clearfix"></div>
                                          <span class="errorfrm_mymentor" id="errormentorSubject">&nbsp;</span>
                                <span class="errorfrm_mymentor" id="errorsameemailid">&nbsp;</span> 
                                    </div>
                                    <span style="display:none; padding-left: 15px;" id="loaddingsubject"><img src="<?php echo $this->cdn() ?>/images/loader16.gif"></span>
                                </div>
                              

                                <div class="form-group">
                                    <label class="col-sm-2 control-label hidden-xs">&nbsp;</label>
                                    <div class="col-sm-5">	
                                        <button class="btn btn-primary user-my-mentor_form-submit" onclick="return submitForm();" type="button">SUBMIT</button>
                                        <button class="btn cancel-btn user-my-mentor_form-cancel" type="submit">CANCEL</button>
                                    </div>
                                    <span style="display:none;" id="loadding"><img src="<?php echo $this->cdn() ?>/images/website/loader16.gif"></span>
                                </div>
                                <div class="errorfrm_mymentor" id="succussesMessage"></div>

                                <?php
                                if (count($this->mentorssIds) != 0) {
                                    foreach ($this->mentorssIds as $key => $mentorssIds) {
                                        ?>
                                        <input type="hidden" id="<?php echo str_replace(' ', '', $key) ?>" name="<?php echo str_replace(' ', '', $key) ?>" value="<?php echo $mentorssIds ?>">
                                        <?php
                                    }
                                }
                                ?>

                            </form>
                        </div>
                        <div class="mentor-inner">
                            <div class="addChild_Container">
                                <h3>My Mentor(s)</h3>
                                <div class="mentor-inner mysubscription">
                                    <div class="table-responsive" id="mentorsTable">
                                        <?php
                                        $key = 0;
                                        if ((isset($this->addedMentors) && count($this->addedMentors) != 0) || (count($this->tempmentors) != 0 )) {
                                            ?>
                                            <table class="table table-bordered">
                                                <tbody>
                                                <tr>
                                                    <th >S.No.</th>
                                                    <th>Name</th>
                                                    <th>User Type</th>
                                                    <th>Board-Class</th>
                                                    <th>Subject</th>
                                                    <th>Email</th>
                                                    <th>Action</th>
                                                </tr>
                                                <?php
                                                foreach ($this->addedMentors as $addedMentors) {
                                                    if (1) {
                                                       // echo "<pre />"; print_r($addedMentors); exit;
                                                        ?>
                                                        <tr>
                                                        <input type="hidden" id="nameMentor<?php echo $addedMentors->id ?>" id="nameMentor<?php echo $addedMentors->id ?>" value="<?php echo $addedMentors->display_name ?>">
                                                        <input type="hidden" id="mentorId<?php echo $addedMentors->id ?>" id="mentorId<?php echo $addedMentors->id ?>" value="<?php echo $addedMentors->mentor_id ?>">
                                                        <input type="hidden" id="subjectId<?php echo $addedMentors->id ?>" id="subjectId<?php echo $addedMentors->id ?>" value="<?php echo $addedMentors->subject_id ?>">
                                                        <!--<td>
                                                                <input type="checkbox" name="check<?php echo $addedMentors->id ?>" id="check<?php echo $addedMentors->id ?>" class="css-checkbox" value="<?php echo $addedMentors->id ?>"><label for="check<?php echo $addedMentors->id ?>" class="css-label"></label>
                                                        </td>-->

                                                        <?php $addedMentors->class_id = ($addedMentors->class_id != '') ? $addedMentors->class_id : $addedMentors->class_ids; ?>
                                                        <td><?php echo $key + 1 ?></td>
                                                        <td><a href="javascript:void(0);" onclick="checkStatus(<?php echo $addedMentors->status; ?>, '<?php echo str_replace(' ', '', $addedMentors->name) . "-" . $addedMentors->mentor_id . '-' . $addedMentors->board_ids . '-' .  $addedMentors->class_id . '-' . $this->subjectArray[$addedMentors->id]['subjectId']; ?>')" ><?php echo $addedMentors->name ?></a></td>
                                                        <td><?php echo $addedMentors->user_type ?></td>
                                                        <td class=""><?php echo $addedMentors->board_name . '&nbsp;-&nbsp;' . $addedMentors->class_name ?></td>

                                                        <td><?php echo $addedMentors->subject_name ?></td>
                                                        <td><?php echo $addedMentors->email_id ?></td>
                                                        <!--<td>Status :&nbsp; <?php if ($addedMentors->status == 0) { ?><span class="status-red"> Not Active<?php } else { ?><span class="status-green">Activated<?php } ?></span></td>-->

                                                        <!-- Added By Neha --->

                                                        <td id="data-row-<?php echo $key ?>-7" class="data-row-7">&nbsp;
                                                            
                                                    <?php if ($addedMentors->subject_id != '') { ?>
                                                        <?php if ($addedMentors->status == 0) { ?>
                                                                <span class="status-red">
                                                                    <?php if ($addedMentors->request_initiator != $userObj->getId()) { ?>
                                                                        <a href="javascript:void(0)"  onclick="MentorOperations('<?php echo $addedMentors->id ?>', 'active',<?php echo $addedMentors->mentor_id; ?>, 'request', 'Student')" class="remove-link" title="Accept" >Accept</a>&nbsp;/&nbsp;<?php } ?><a href="javascript:void(0)"  onclick="MentorOperations('<?php echo $addedMentors->id ?>', 'delete',<?php echo $addedMentors->mentor_id; ?>, 'request', 'Student')" class="remove-link" title="Delete">Delete</a> </span>

                                                            <?php } else { ?>

                                                                <a href="javascript:void(0)"  onclick="MentorOperations('<?php echo $addedMentors->id ?>', 'delete',<?php echo $addedMentors->mentor_id; ?>, 'relation', 'Student')" class="remove-link" title="Delete">Delete</a>

                                                            <?php }
                                                    }else{
                                                        echo 'NA<br/>';
                                                        echo '<span style="color:red;">Please ask your mentor to add Subject</span>';
                                                    }
                                                            ?></span></td>


                                                        <!--<td class="view_details"><img onclick="showPopupData('<?php echo $key ?>')" src="<?php echo $this->cdn() ?>/images/view_details.png" width="30px"/></td>-->
                                                        </tr>


                                                        <?php
                                                        $key++;
                                                    }
                                                    if (isset($this->tempmentors) && count($this->tempmentors) != 0) {
                                                        // count($this->tempmentors)
                                                        foreach ($this->tempmentors as $mentors) {
                                                            ?>
                                                            <tr>
                                                                <td><?php echo $key + 1 ?></td>

                                                                <td><a href="javascript:void(0);" onclick="alert('User not registered yet')"><?php
                                                                        $name = explode("@", $mentors['email_id']);
                                                                        echo $name['0'];
                                                                        ?></a></td>    


                                                                <td>NA</td>
                                                                <td>
                                                                    <?php echo $mentors['board_name'] . '&nbsp;&nbsp;' . $mentors['class_name'] ?>
                                                                </td>
                                                                <td><?php echo $mentors['subject_name'] ?></td>
                                                                <td><?php echo $mentors['email_id'] ?></td>
                                                                <td>
                                                                    <a href="javascript:void(0)"  onclick="tempMentorOperations('<?php echo $mentors['id'] ?>', 'delete')" class="remove-link" title="Delete">Delete</a>
                                                                </td>
                                                            </tr>

                                                            <?php
                                                            $key++;
                                                        }
                                                    }
                                                    ?>
                                                    <?php
                                                }
                                                ?>
                                              </tbody>
                                            </table>
                                            <?php
                                        } else {
                                            ?>
                                            <div class="no-record"><p>No records found</p></div>
                                            <?php
                                        }
                                        ?>

                                    </div>
                                </div>
                                <script>
                                    
                                    $("#subscribed").prop("checked", true);
                                        $('input[type=radio]').click(function() {
                                         var RadioID = $(this).prop('id');
                                        showall(RadioID);
                                    });
                                    function closedata()
                                    {
                                        $(".datashow_popup").hide();
                                        $(".backbase_transform").hide();
                                        $("#close_button").hide();
                                    }
                                    function showPopupData(key)
                                    {
                                        var firstname = $("#data-row-" + key + "-3").html();
                                        var name = $("#data-row-" + key + "-4").html();
                                        var subject_name = $("#data-row-" + key + "-5").html();
                                        var email_id = $("#data-row-" + key + "-6").html();
                                        var status = $("#data-row-" + key + "-7").html();
                                        var data = "<a id='close_button' onclick='closedata()' href='JavaScript:void(0)'></a><div class='datapopup_class'>" + firstname + "</div><div class='datapopup_class'>" + name + "</div><div class='datapopup_class'>" + subject_name + "</div><div class='datapopup_class'>" + email_id + "</div><div class='datapopup_class'>" + status + "</div>";
                                        $(".datashow_popup").html(data).show();
                                        $(".backbase_transform").show();
                                        $("#close_button").show();
                                    }
                                </script>
                            </div>
                        </div>	
                    </section>
                </div>
            </div>
        </div>
    </div>
    <?php
} else {
    ?>
    <script>
        window.location = "<?php echo $this->url('home'); ?>"
    </script>
<?php } ?>

<script type="text/javascript" language="JavaScript">
	
    jQuery(document).ready(function() {
        // radio button selected 
        $("#subscribed").prop("checked", true);
        $('input[type=radio]').click(function() {
            alert("dddd");
            var RadioID = $(this).prop('id');
            showall(RadioID);
        });

        $('.upload_div').hide();
        $('#mentor_upload').click(function() {
            $('.upload_div').toggle();
            $('.mentor_download').hide();
            $('.mentor_view').hide();
            $("#profile").height($(".right-content").height() + 8);
        });
        $('#close_upload').click(function() {
            $('.upload_div').hide();
        });
        $('#close').click(function() {
            $('.upload_div').hide();
            $('.mentor_download').hide();
        });

        document.forms['user-my-mentor_form'].elements['Mentor_Name'].focus();

        $('#add-mentor-tog,.user-my-mentor_form-cancel').click(function() {
            $('#succussesMessageload').html('');
            $('#user-my-mentor_form').show();
            $(window).resize();
        });

        $('#mentor_download').click(function() {
            $('.mentor_download').toggle();
            $(window).resize();
            $('.upload_div').hide();
            $('.mentor_view').hide();
            $("#profile").height($(".right-content").height() + 8);
        });
        $('#mentor_view').click(function() {
            $('.mentor_view').toggle();
            $('.upload_div').hide();
            $('.mentor_download').hide();
            $(window).resize();
        });

    });
       
       $("#board_id").change(function() {	
            $("#class_id").parent().find(".holders").text("");
            $("#class_id").parent().find(".holders").text("Select Class");
            var classid = $("#board_id option:selected").val();
            $("#mentor_subject").html('<option selected="" value="">Select Subject</option>');
            $.ajax({
                type: 'POST',
                url: 'lms/index/custom-containerlist/' + $(this).val(),
                dataType: 'json',
                success: function(data) {
                    var classEle = $("#class_id");
                    var html = '';
                    if (data != '') {    
                        html += '<select id="class_id" name="class_id" class="select"><option selected="" value="">Select Class</option>';
                        $.each(data.options, function(i, el) {
                            html += '<option value="'+el.rack_id+'">'+el.rack_name+'</option>';
                        });
                       html+='</select>';
                       $('#selectedClass').html(html).promise().done(function(){
                           $('#class_id').selectbox({
                               onChange:function(val,inst){
                                   var RadioID = $('input[type=radio]').prop('id');                                       
                                       showall(RadioID);
                                       return false;
                                    $.ajax({
                                        type: 'POST',
                                        url: 'lms/index/containerlist/' + val,
                                        dataType: 'json',
                                        success: function(data) {
                                            if (data != ''){
                                                $("#mentor_subject").html('<option selected="" value="">Select Subject</option>');
                                                $.each(data.options, function(i, el) {
                                                $("#mentor_subject").append($("<option>").attr("value", el.rack_id).text(el.rack_name));
                                            });
                                            }else{
                                                   $("#mentor_subject").html('<option selected="" value="">Select Subject</option>');
                                                }
                                            }
                                     });
                                  }
                            });
                        });                      
                    }else{
                        classEle.html('<option selected="" value="">Select Class</option>');
                    }
                }
            });
        });

 function showall(subjects) {


        var classid = $("#class_id option:selected").val();
        if (classid == 0)
            return false;
        $.each($('[name=subject_type]'), function(i, el) {
            if (el.checked)
                subjecttype = el.value;
        });

        $("#loaddingsubject").show();
        $.ajax({
            type: 'POST',
            url: '<?php echo $this->Url("getSubjectlist") ?>',
            data: {classid: classid, subjecttype: subjecttype},
            success: function(data) {
                $("#loaddingsubject").hide();
                if (data != '') {
                    $("#mentor_subject").html('<option selected="" value="">Select Subject</option>');
                    $("#mentor_subject").append(data);
                } else {
                    $("#mentor_subject").html('<option selected="" value="">Select Subject</option>');
                }




            }
        });

    }
</script>
<script type="text/javascript">
    //$(".inputs select").msDropDown();
    var a = $("#nav_find").val();
    $("#" + a).addClass("container-nav-current");
    $(document).ready(function() {
        $("#profile").height($(".right-content").height() + 8);
    });
    $(window).resize(function() {
        $("#profile").height($(".right-content").height() + 8);
    });
</script>

<link rel="stylesheet" href="<?php echo $this->cdn() ?>/css/jquery-ui.css">
<script src="<?php echo $this->basePath() ?>/js/jquery-ui.js"></script>
<script>      $(function() {
        var availableTags =<?php echo '[' . $this->mentorNames . ']'; ?>;
        $("#Mentor_Name").autocomplete({
            source: availableTags
        });
    });

    $('#Mentor_Name').focusout(function(e) {
        var mentorName = $('#Mentor_Name').val();
        var mName = mentorName.replace(' ', '');
//        alert('#'+mName);
        var mentorId = $('#' + mName).val();
        var relationshipId = $('#Relationship').val();
        //        alert(mentorName);
        if (mentorName != '') {
            $('#emailLoaddrop').show();
            $.ajax({
                type: 'POST',
                url: '<?php echo $this->Url('chkMentor') ?>',
                dataType: "json",
                data: {mentorId: mentorId, mentorName: mentorName, relationshipId: relationshipId},
                success: function(data) {
//            alert(data);
                    $('#emailLoaddrop').hide();
                    if (data.output == 'success') {
                        $('#emailLoaddrop').show();
                        $('#Mentor_Email').val(data.mentorEmail);
                        var mentorSubject = $('#mentor_subject').val();
                        var mentorName = $('#Mentor_Name').val();
                        var mName = mentorName.replace(' ', '');
                        var mentorId = $('#' + mName).val();
                        if (mentorId != '') {
                            $('#emailLoaddrop').hide();
                            /*$.ajax({
                             type: 'POST',
                             url: BASE_URL + '/account/check-mentor-subject',
                             data: {mentorId: mentorId, mentorSubject: mentorSubject},
                             success: function(data) {
                             $('#emailLoaddrop').hide();
                             if (data.output == '0') {
                             $('#succussesMessage').html('Please select mentor subject(s) as  ' + data.subject.replace(/,\s*$/, ""));
                             $('#succussesMessage').show().delay(5000).fadeOut();
                             $('#mentorSubjectId').val(data.subjectId);
                             $('#mentorSubjectName').val(data.subject);
                             } else {
                             $('#mentorSubjectId').val('');
                             $('#succussesMessage').html('');
                             }
                             }
                             });*/
                        } else {
                            $('#mentorSubjectId').val('');
                        }
                    } else {
                        $('#mentorSubjectId').val('');
                        $('#Mentor_Email').val('');
                        $('#Mentor_Number').val('');
                    }
                }
            });
        }
    });

    function mymentor_subform(e) {
        if (e.keyCode == 13) {
            return submitForm();
        }
    }
    function submitForm() {
        var letters = /^[a-zA-Z ]*$/;
        var mentorname = $('#Mentor_Name').val();
        var emailCheck = $('#Mentor_Email').val();
        var class_id = $('#class_id').val();
        
        var flag = true;
        if ($('#Relationship').val() == "") {
            $('#errorRelationship').html('Please enter relationship.');
            flag = false;
        } else {
            $('#errorRelationship').html('&nbsp;');
        }
       
        if (mentorname == "") {
            $('#errorMentor_Name').html('Please enter mentor name.');
            flag = false;
        } else if (!mentorname.match(letters)) {
            $('#errorMentor_Name').html('Please enter only alphabets.');
            flag = false;
        } else {
            $('#errorMentor_Name').html('');
        }

        if (emailCheck == "") {
            $('#erroremail').html('Please enter mentor email address.');
            flag = false;
        } else if (checkEmail(emailCheck) == false) {
            $('#erroremail').html('Please enter a valid email address.');
            flag = false;
        } else {
            $('#erroremail').html('');
        }
<?php if (is_object($userObj->getEmail())) { ?>
            var loggedemailid = '<?php echo $userObj->getEmail(); ?>';
            if (emailCheck == loggedemailid) {
                $('#errorsameemailid').html('You are already logged in.');
                flag = false;
            } else {
                $('#errorsameemailid').html('');
            }
<?php } ?>

        if ($('#board_id').val() == '' || $('#board_id').val() == '0') {
            $('#errormentorBoard').html('Please select Board');
            flag = false;
        } else {
            $('#errormentorBoard').html('');
        }

        if ($('#class_id').val() == '' || $('#class_id').val() == '0') {
            $('#errormentorClass').html('Please select Class');
            flag = false;
        } else {
            $('#errormentorClass').html('');
        }


        if ($('#mentor_subject').val() == '') {
            $('#errormentorSubject').html('Please select subject');
            flag = false;
        } else {
            $('#errormentorSubject').html('');
        }
       
        if (flag == false) {
            return false;
        } else {
            var mentorSubject = $('#mentor_subject').val();
            var Mentor_Email = $('#Mentor_Email').val();
            var Mentor_Name = $('#Mentor_Name').val();
            var Relationship = $('#Relationship').val();
            var Board_Id= $('#board_id').val();

            $('#loadding').show();
            var mentorName = $('#Mentor_Name').val();
            var mName = mentorName.replace(' ', '');
           
            var mentorId = $('#' + mName).val();
    
            if (mentorId != '') {
                $('#loadding').show();
               
                $.ajax({
                    type: 'POST',
                    url: '<?php echo $this->Url('add-mentor-details'); ?>',
                    data: {mentorSubject: mentorSubject, Mentor_Email: Mentor_Email,classId: class_id, Mentor_Name: Mentor_Name, Relationship: Relationship,BoardId: Board_Id},
                    dataType: 'json',
                    success: function(data) {
                        //$('#loadding').show();
                        
                        $.ajax({
                            url: '<?php echo $this->Url('mymentor'); ?>',
                            success: function(data1) {
                                $("#mentorsTable").html($(data1).find("#mentorsTable").html());
                                
                            }
                        });
                        
                        if (data.output != '0') {
                            if (data.output == 'notexist') {
                                $('#loadding').hide();
                                $('#succussesMessageload').html('Requested Mentor not exist');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                                $("#Mentor_Name").attr("placeholder", "Please enter mentor name").val("");
                                $("#Mentor_Email").attr("placeholder", "Please enter mentor email address").val("");

                            }else if(data.output == 'self') {
                                $('#loadding').hide();
                                $('#succussesMessageload').html('You can not add your email as Mentor');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                                $("#Mentor_Name").attr("placeholder", "Please enter mentor name").val("");
                                $("#Mentor_Email").attr("placeholder", "Please enter mentor email address").val("");
                            } else {
                                $('#loadding').hide();
                                if(data.response_type=='success') {
                                    $('#succussesMessageload').html('<b style="color:green;">Your request has been sent successfully</b>');   
                                }
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                                $("#Mentor_Name").attr("placeholder", "Please enter mentor name").val("");
                                $("#Mentor_Email").attr("placeholder", "Please enter mentor email address").val("");
                                setTimeout(function(){
                                    $('#add-mentor-tog').trigger('click');
                                },5000);
                            }
                            
                        } else {
                            $('#loadding').hide();
                            $('#succussesMessageload').html('Request for this subject is already sent');
                            $('#succussesMessageload').show().delay(5000).fadeOut();
                            //$('input,textarea').placeholder();

                        }
                        
                    }
                });
              
                
            } else {
                $('#loadding').hide();
                $('#mentorSubjectId').val('');
            }
        }
    }


    function MentorOperations(studentId, type, id, actiontype, actortype) {

        if (type == 'delete') {

            if (!confirm('Are you sure, you want to delete this request?'))
            {
                return false;
            }
            else
            {
                $('#loadding1').show();
            }
        } else {

            $('#loadding1').show();
        }

        $.ajax({
            type: 'POST',
            url: '<?php echo $this->Url('mentorRequests') ?>',
            data: {ids: studentId, type: type, id: id, actiontype: actiontype, actortype: actortype},
            success: function(data) {
                $('.upload1').hide();
                $('.download1').hide();
                $('.feedback1').hide();

                if (data) {


                    $('#loadding1').show();
                    $.ajax({
                        url: '<?php echo $this->Url('mymentor') ?>',
                        success: function(data1) {
                            $("#mentorsTable").html($(data1).find("#mentorsTable").html());
                            $('#loadding1').hide();
                            if (type == 'delete') {
                                $('#succussesMessageload').html('<b style="color:green;">Your selected Mentor is successfully Deleted</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            } else if (type == 'active') {
                                $('#succussesMessageload').html('');
                                $('#succussesMessageload').html('<b style="color:green;">Your selected mentor is successfully Activated</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            } else if (type == 'deActive') {
                                $('#succussesMessageload').html('');
                                $('#succussesMessageload').html('<b style="color:green;">Your selected Mentor is successfully Deleted</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            }

                        }
                    })





                }
            }
        });
        //}	
    }

    function tempMentorOperations(id, type) {

        if (type == 'delete') {

            if (!confirm('Are you sure, you want to delete this request?'))
            {
                return false;
            }
            else
            {
                $('#loadding1').show();
            }
        } else {

            $('#loadding1').show();
        }

        $.ajax({
            type: 'POST',
            url: '<?php echo $this->Url('tempmentorrequest'); ?>',
            data: {id: id, type: type},
            success: function(data) {
                $('.upload1').hide();
                $('.download1').hide();
                $('.feedback1').hide();

                if (data) {


                    $('#loadding1').show();
                    $.ajax({
                        url: BASE_URL + '/account/my-mentor',
                        success: function(data1) {
                            $("#mentorsTable").html($(data1).find("#mentorsTable").html());
                            $('#loadding1').hide();
                            if (type == 'delete') {
                                $('#succussesMessageload').html('<b style="color:green;">Your selected Mentor is successfully Deleted</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            } else if (type == 'active') {
                                $('#succussesMessageload').html('');
                                $('#succussesMessageload').html('<b style="color:green;">Your selected mentor is successfully Activated</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            } else if (type == 'deActive') {
                                $('#succussesMessageload').html('');
                                $('#succussesMessageload').html('<b style="color:green;">Your selected Mentor is successfully Deleted</b>');
                                $('#succussesMessageload').show().delay(5000).fadeOut();
                            }

                        }
                    })





                }
            }
        });
        //} 
    }

    function removeMembers(mentorId) {
        var selectBoxes = "";
        var checkboxes = document.getElementsByTagName("INPUT");
        var len = checkboxes.length;
        var cnt = 1;
        /*for(var i=0;i<len;i++)
         {
         if(checkboxes[i].type=="checkbox")
         {
         if(checkboxes[i].checked)
         {
         selectBoxes+=checkboxes[i].value+''+',';
         cnt++;
         
         }
         }
         }*/
        selectBoxes = mentorId;
        if (cnt == 0)
        {
            alert('Please select the row to delete')
        } else {
            $('#loadding2').show();
            $.ajax({
                type: 'POST',
                url: BASE_URL + '/account/delete-mentors',
                data: {ids: selectBoxes},
                success: function(data) {
                    $('#loadding2').hide();
                    if (data != 'noRecords') {
                        $('#removeMembers').show();
                        $('#succussesMessage').html('');
                        $('#succussesMessage2').html('<b style="color:green;">Selected rows successfully Deleted.</b>');
                        $('#mentorsTable').html(data);
                    } else {
                        $('#succussesMessage').html('');
                        $('#succussesMessage2').html('<b style="color:green;">Selected row(s) successfully Deleted.</b>');
                        $('#mentorsTable').html('<tr><td>No records found</td></tr><tr class="space-row"></tr>');
                        $('#removeMembers').hide();
                    }
                }
            });
        }
    }
    function checkStatus(value, url)
    {
        // alert(url);
        if (value == 0) {
            alert('Add request pending');
        } else {
            window.location = "<?php echo $this->Url('mymentorsfeedback') ?>/" + url;
        }
	
    }
</script>
