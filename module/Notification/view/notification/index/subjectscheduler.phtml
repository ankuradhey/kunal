<link rel="stylesheet" href="<?php echo $this->cdn() ?>/css/website/jquery-ui.css">
<!--<link rel="stylesheet" href="<?php echo $this->cdn() ?>/css/component.css">-->
<script src="<?php echo $this->basePath() ?>/js/jquery-ui.js"></script>
<script src="<?php echo $this->basePath() ?>/js/container.js"></script>
<script src="<?php echo $this->basePath() ?>/js/easyResponsiveTabs.js" type="text/javascript"></script>
<script src="<?php echo $this->basePath() ?>/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script> 
   $(window).load(function(){
            $(".scrollcontent").mCustomScrollbar({
                    theme:"minimal"
            });
    });                  
   function showMenu(level, subjectId) 
   {
    $('#loadding').css('display','block');
            $('#inner-cont_rhtst').css('width','61.8%');
            if (level == 'breadcrum') {
             $('#chapterlisting_' + subjectId).toggleClass('visible');
             }
            var classId     = "<?php echo $this->navigationarray; ?>";
            var userId      = "<?php echo $this->user_id ?>";
            var customboard = "<?php echo $this->custom_board_ids;?>";
            
            $.ajax({
                    type:'GET',
                    url: '<?php echo $this->Url('schedulerchapterlist');?>/'+subjectId +'/'+classId+'/'+userId+'/'+customboard,                  
                    success: function(data){   
                       $('#calendar12').html('');
                       $('#schedulerchapterlist').html(data);
                       calendar();
                       //addSubjectColor();
                    }
            });

            $(document).ajaxSuccess(function(){
                $('#loadding').css('padding-top','80px;');
                $('#loadding').css('display','none');
            });
         
        }
        
</script>  


<script type="text/javascript">
    $(document).ready(function() {
        var checktoggle = false;
        $('.showLeftPannel').click(function() {
            if (checktoggle == false)
            {
                $('#ProLeft_pannel').animate({
                    'left': '0'
                }, 300);
                checktoggle = true;
            }

        });

    });
</script>

  <?php 
if ($subjectDetails) {
    $j = 1;
    $k = 15;
    foreach($subjectDetails as $subjectcontent){
       if(in_array($subjectcontent['id'], $this->usersubjects)){
           $subjectcontent['paid'] = $j;
         $j++;  
       }else{
           $subjectcontent['paid'] = $k;
           $k++;
       }
       $subjectalldate[] = $subjectcontent;
    }

  
 foreach ($subjectalldate as $key => $row)
{
    $subjectsdata[$key] = $row['paid'];
}
 
array_multisort($subjectsdata, SORT_ASC, $subjectalldate);
}else{
    $subjectalldate = array();
} 
  ?>
<div id="ProLeft_pannel" class="left-pannel show-pannel">
 
    <ul class="PorSubject scrollcontent custom-scroll subject-listpannel" >
        <?php if ($subjectalldate) { ?>
            <?php
            foreach ($subjectalldate as $subjectdetails) 
            {
                if ($subjectdetails['id'] == 0 || $subjectdetails['id'] == '') { ?>             
                    <li>
                        <a <?php if (strtolower($subjectdetails['language']) == "hindi" || strtolower($subjectdetails['subject_language']) == "mangal" || strtolower($subjectdetails['subject_language']) == "utf8") { ?>
                                class="hindi menuAll trigger"

                            <?php } else { ?>
                                class="menuAll trigger <?php echo strtolower(html_entity_decode($subjectdetails['subject_name'])) ?>"

                            <?php } ?>
                            title="<?php echo html_entity_decode($subjectdetails['subject_name']) ?>" href="javascript:void(0);" onclick="showMenu('subjects', '<?php echo $subjectdetails['board_class_subject_id']; ?>');" style="background-color: <?php echo $subjectdetails['color']; ?>">
                                <?php if (file_exists("public" . $subjectdetails['icon'] .'.png')) { ?><img  src="<?php echo $this->basePath() ?>/<?php echo  $subjectdetails['icon']  . '.png'; ?>" />                            <?php } else {
                                if (strtolower($subjectdetails['language']) == "hindi" || strtolower($subjectdetails['language']) == "mangal" || strtolower($subjectdetails['language']) == "utf8") {
                                    ?>
                                    <img  src="<?php echo $this->cdn() ?>/images/website/1-Subject/default_hssubject.png" />
                                <?php } else { ?>
                                    <img  src="<?php echo $this->cdn() ?>/images/website/1-Subject/default_ssubject.png" />
                                <?php }
                            }
                            ?><span><?php
                                if (strtolower($subjectdetails['subject_language']) == "hindi" || strtolower($subjectdetails['subject_language']) == "mangal" || strtolower($subjectdetails['subject_language']) == "utf8") {
                                    echo html_entity_decode($subjectdetails['subject_name']);
                                } else {
                                    if (strlen(html_entity_decode($subjectdetails['subject_name'])) > 100) {
                                        echo substr(html_entity_decode($subjectdetails['subject_name']), 0, 99) . '..';
                                    } else {
                                        echo html_entity_decode($subjectdetails['subject_name']);
                                    }
                                }
                                ?></span>
                        </a>
                        <ul id="chapterlisting_<?php echo $subjectdetails['id']; ?>">

                        </ul>
                      </li> 
        <?php  } else { ?>
            <li> <a class="menuAll trigger <?php echo strtolower(html_entity_decode($subjectdetails['subject_name'])) ?>"  title="<?php echo html_entity_decode($subjectdetails['subject_name']) ?>" href="javascript:void(0);" onclick="showMenu('subjects', '<?php echo $subjectdetails['id']; ?>');" style="background-color: <?php echo $subjectdetails['color']; ?>"><?php if (@$subjectdetails['icon']) { ?><img  src="<?php echo $this->basePath() ?><?php echo  @$subjectdetails['icon'] ; ?>" />
                                <?php } else { ?>
<!--                                <img  src="<?php echo $this->cdn() ?>/images/website/1-Subject/default_ssubject.png" />-->
                                <?php } ?><span><?php
                                if (strtolower($subjectdetails['language']) == "hindi" || strtolower($subjectdetails['language']) == "mangal" || strtolower($subjectdetails['language']) == "utf8" ) {
                                    echo html_entity_decode($subjectdetails["subject_name"]);
                                } else {
                                    if (strlen(html_entity_decode($subjectdetails["subject_name"])) > 100) {
                                        echo substr(html_entity_decode($subjectdetails["subject_name"]), 0, 99) . '..';
                                    } else {
                                        echo html_entity_decode($subjectdetails['subject_name']);
                                    }
                                }
                                ?></span>
                                <?php 
                                    //if (!in_array($subjectdetails['id'], $this->usersubjects)) {//die('ff');
                                ?>
                                    <!--<span class="trial-icon"><img  src="<?php //echo $this->basePath() ?>/images/website/trial_icon1.png" /></span>-->
                              <?php //} ?>  
                        </a> <ul id="chapterlisting_<?php echo $subjectdetails['id']; ?>">

                        </ul> </li>
        <?php
         
        }
    }
}
?>
    </ul>
</div>
<div id="schedulerchapterlist"></div>

<script>
function in_array(needle, haystack, argStrict) {
  var key = '',
    strict = !! argStrict;

  //we prevent the double check (strict && arr[key] === ndl) || (!strict && arr[key] == ndl)
  //in just one for, in order to improve the performance 
  //deciding wich type of comparation will do before walk array
  if (strict) {
    for (key in haystack) {
      if (haystack[key] === needle) {
        return true;
      }
    }
  } else {
    for (key in haystack) {
      if (haystack[key] == needle) {
        return true;
      }
    }
  }

  return false;
}
   function myFunction(data, id, chapterId, tabType,class_ids) { //alert(chapterId);return;
       $(".action-drop").hide();
       $('#' + data).show();
       var colorType = $('#color' + data).val();
       var htmlCompleted = '';
       var htmlDoitnow = '';
       var calhtml = '';
       var htmlreschedule = '';
       var usertypeid = '<?php echo $this->usertype; ?>'; 
       var customboardid = '<?php echo $this->custom_board_ids; ?>';
       if (colorType == 'completedColor') { //|| chapterId == 0
           htmlCompleted = "<a href='javascript:void(0);' style='color:#B0B0B0'>Mark as Completed</a>";
           htmlDoitnow = "<a href='javascript:void(0);' style='color:#B0B0B0'>Do It Now</a>";
       } else {
           htmlCompleted = "<a href='javascript:void(0);'  onclick='calenderActions(1," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\");'>Mark as Completed<span id='loadernewc' style='display:none'><img src='" + '<?php echo $this->basePath(); ?>' + "/images/website/website/loader16.gif'></span></a>";
           htmlDoitnow = "<a href='javascript:void(0);'  onclick='calenderActions(2," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\");'>Do It Now</a>";
       }
//       if(usertypeid == '2' || usertypeid == '3'){
           htmlreschedule = "<a href='javascript:void(0);'  onclick='RecalenderActions(2," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\",\""+customboardid+"\");'>Reschedule</a>";
//       }
       calhtml = "<div class='action-drop' id='" + data + "'>" +
               "<ul>" +
               "<li>" + htmlCompleted +
               "</li>";
               if(chapterId != 0){
                calhtml += "<li>" + htmlDoitnow + "</li>"                 
               }
                calhtml += "<li>" +
               "<a href='javascript:void(0);'  onclick='calenderActions(3," + id + ",\"" + data + "\"," + chapterId + ");'>Delete<span id='loadernew' style='display:none'><img src='" + '<?php echo $this->basePath(); ?>' + "/images/website/loader16.gif'></span></a>" +
               "</li>" ;
                calhtml += "<li>" +htmlreschedule+"</li>"
               //"<li>" +
               //"<a href='javascript:void(0);' onclick='showLeftbar();' id='ms2item' style='display: block;'>Add New Task</a>" +
               //"</li>" +
               "</ul>" +
               "</div>"//<div class='drop-bottom'></div>
       $('#' + data).append(calhtml);
   }
   
   function myassigndFunction(data, id, chapterId, tabType,class_ids) { //alert(chapterId);return;
       $(".action-drop").hide();
       $('#' + data).show();
       var colorType = $('#color' + data).val();
       var htmlCompleted = '';
       var htmlDoitnow = '';
       var calhtml = '';
       var htmlreschedule = '';
       var usertypeid = '<?php echo $this->usertype; ?>';  
       var customboardid = '<?php echo $this->custom_board_ids; ?>';
       
           htmlCompleted = "<a href='javascript:void(0);'  onclick='acceptcalender(1," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\");'>Accept<span id='loadernewc' style='display:none'><img src='" + '<?php echo $this->basePath(); ?>' + "/images/website/website/loader16.gif'></span></a>";
           htmlDoitnow = "<a href='javascript:void(0);'  onclick='acceptcalender(2," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\");'>Decline</a>";
       
          htmlreschedule = "<a href='javascript:void(0);'  onclick='RecalenderActions(2," + id + ",\"" + data + "\"," + chapterId + ",\"" + tabType + "\",\"" + class_ids + "\",\""+customboardid+"\");'>Reschedule</a>";
          calhtml = "<div class='action-drop' id='" + data + "'>" +
               "<ul>" +
               "<li>" + htmlCompleted +
               "</li>";

                calhtml += "<li>" + htmlDoitnow + "</li>"                 

                calhtml += "<li>" +htmlreschedule+"</li>"
               "</ul>" +
               "</div>"//<div class='drop-bottom'></div>
       $('#' + data).append(calhtml);
   } 
   
   
   $(document).mousedown(function(e) {
       var container = $("ul");
       if (container.has(e.target).length === 0) {
           $(".action-drop").hide();
       }
   });
   function goToSubjectPage(rurl) {
       alert('Please select a subject');
       window.location = '<?php //echo $this->Url('select-subjects'); ?>' + '/' + rurl;
   }
   $(document).ready(function() {
       $("#responsive_menu").height($("#in-container").height() + 7);
       $(".leftrightSiderbar").height($("#in-container").height() + 7).css('background-color', 'white');
   });
   $(window).resize(function() {
       $("#responsive_menu").height($("#in-container").height() + 7);
       $(".leftrightSiderbar").height($("#in-container").height() + 7).css('background-color', 'white');
   });
   $(".close_mobile").click(function() {
       $(".cbp-spmenu-push").hide();
       $(".normals a").removeClass("close").addClass("opens");
       $("#inner-image-close").css("z-index", "1010");
   });
   $(".opens").click(function() {
       $("#inner-image-close").css("z-index", "0");
   });
   $(".close").click(function() {
       $("#inner-image-close").css("z-index", "1010");
   });
</script>


