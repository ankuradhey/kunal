<script type="text/javascript" src="<?php //echo $this->basePath(); ?>/js/libs/em/em_player_factory.js"></script>

<?php 
$count = $this->videocountdata; 
        $today = date('Y-m-d');
        if ($this->videomask->start_date <= $today && $this->videomask->end_date >= $today) { ?>
            <!--   <p> <iframe allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" src="<?php echo $this->basePath() ?>/uploads/ticker/<?php //echo $ticker->ticker_file ?>" style="width:100%; height:100%" id="seniorVideo"></iframe></p>-->
  <div id="hiddendiv">
<input type="hidden" name="nextbutton" id="nextbutton" value="<?php if($this->nextvalue!=''){ echo $this->nextvalue->ticker_id; }?>"/>
<input type="hidden" name="prebutton" id="prebutton" value="<?php if($this->prevalue!=''){echo $this->prevalue->ticker_id ; }?>"/> 
            </div>


<?php if($count>1) {?>
<!--<div id= "predata"><a href="javascript:void(0);" onclick="predatafeach()">pre</a></div>--> 
<!--<a href="javascript:void(0);" onclick="nextdatafeach('<?php //echo $this->nextvalue->ticker_id ;?>')" class="videoNext"><span><img src="<?php echo $this->cdn() ?>/images/btn_next_white.png" /></span></a>-->
<script type="text/javascript">
        if($("#nextVideo")){
            $("#nextVideo").remove();        
        }
        $("<a/>", {
        "id":"nextVideo",
        "href": "javascript:void(0);",
        "onclick": "nextdatafeach('<?php echo $this->nextvalue->ticker_id; ?>')",
        "class": "videoNext",                    
        html: "<span><img src=\"<?php echo $this->cdn() ?>/images/btn_next_white.png\" /></span>"
        }).appendTo("#videoplayerA");
        </script>
<?php } ?>
  <?php if($this->videomask->ticker_type=='video'){?>
            <script type="text/javascript">
                $(document).ready(function() {
                    $PlayerFactory = new EmPlayerFactory("<?php echo $this->basePath() ?>/");
                    $player = $PlayerFactory.createGenericVideoPlayer();
                    $player.attachPDVideoPlayer(
                            "<?php echo $this->basePath() ?>/uploads/ticker/<?php echo $this->videomask->ticker_file ?>",
                            "#videoplayerB",
                            null,
                            null,
                            true
                            );
                });
            </script>
  <?php }else{?>
             <img src='<?php echo $this->basePath() ?>/uploads/ticker/<?php echo $this->videomask->ticker_file ?>' />
  <?php }?>
          
        <?php if($count>1){
            $nextid  = $this->videomask->ticker_id +1;
            ?>
<!--<div id="nextdata"><a href="javascript:void(0);" onclick="nextdatafeach('<?php echo $this->nextvalue->ticker_id ;?>')"> Next</div>-->
        <?php  } } //}  ?>

    <?php if(!empty($this->imagemask)){
    foreach ($this->imagemask as $ticker) {
    if ($ticker->ticker_type == 'image') {
        $today = date('Y-m-d');
        if ($ticker->start_date <= $today && $ticker->end_date >= $today) {
            ?>

            

        <?php }
    }
    }}
?>
         
   <script type="text/javascript">
function nextdatafeach(id){
     $.ajax({
                type: 'POST',
                url: BASE_URL + '/notification/index/nextprevideo',
                data: {id: id},
                success: function(data) {                                       
                    $("#videoplayerB").html('');
                    $("#videoplayerB").html(data);                                       
                    
                }
         });
}
function predatafeach(){
    var id = $('#prebutton').val();
    if(id!=''){
     $.ajax({
                type: 'POST',
                url: BASE_URL + '/notification/index/nextprevideo',
                data: {id: id},
                success: function(data) {                                       
                    $("#videoplayerB").html('');
                    $("#videoplayerB").html(data);                                       
                    
                }
         });
    }
}
</script>

