<link rel="stylesheet" href="<?php echo $this->fileversion($this->basePath("css/website/register.css")); ?>" type="text/css" media="screen" />
<h1><?php // echo $this->translate('Register');                          ?></h1>
<script>
    $(document).ready(function() {
    $("#Ip_related_main_div").show();
    $('.registerright').hide();
//    $('#email').focus(function(){
        $('.right-click').hide("fast");
        $('.left-click').css("width", "100%");
        $('.orBtn').hide();
        $('.SelectArea').show(1000);
//    });
    
    
    $('.registerright').hide("fast");
    $('.registerleft').css("width","95%");
    $('.terms').css("marginLeft","177px")

});
</script>
<style type="text/css">
    .select-wrappers, .select-wrappers select, .inputBg{ border-radius:0;}
    .errorMessage {font-size: 14px; width: 100%; color: red; display: block; margin-bottom:0; clear: both;}
    #banner {background-position: center top; background-size: auto auto;}
    .select-wrappers{margin-top:0;  float:none; width:287px; background:url("../images/package_confirmation/dropdown_arrow.png") no-repeat scroll 97% 50% #fff;}
    .registerleft_content{width:300px; float:left; padding: 15px 0 0 0;}
    .SelectArea{float:left; display:none; width: 290px; margin:15px 0 0 30px; padding:0px 0 0 30px; border-left: 1px solid #ccc; min-height:350px;}
    .terms{color:#888;margin-left:0px; padding-bottom:7px;}
    .select-wrappers, .select-wrappers select option{ color:#222;}
    .ddlabel{ margin-left:12px; display:inline-block; margin-top:4px; font-size:12px; color:#333;}
    .dd .ddTitle{ background:#f1f1f1; padding-right:5px;}
    .dd .ddChild li{ line-height:20px;}
    .DOB-register li{ width: 100%; margin-right: 0}
    .DOB-register li span.select-wrapper{ width: 31.33%}
    .DOB-register li span.select-wrapper{ margin-left: 2%}
    .DOB-register li span.select-wrapper:first-child{ margin-left: 0}
    .DOB-register li .radio-box{ display: block; width: 100%}
	.DOB-register .select-wrapper{ border-radius:0; height:35px;}
    @media only screen and (max-width: 360px) {
        .registerleft_content{width:100%; float:none; padding: 15px 0 0 0;}
        .SelectArea{float:none; width: 100%; margin:0; padding:0; border-left: none;  min-height:auto;}
        .terms{color:#888;margin-left:0px!important; padding-bottom:7px;}
        .select-wrappers{ width:100%;}
        .select-wrappers select{ width:91% !important;}
    }
    @media only screen and (max-width: 320px) {
        #mobile{ width:175px!important;}
        #regiterContainer .registerHeader h2{ font-size:20px!important;}
        #regiterContainer .registerleft{ padding:0 5px !important; width:95%;}
    }
    .ui-menu .ui-menu-item {
        font-size:13px;
    }
  
</style>


<?php
if(!$this->zfcUserIdentity()){
    if (!$this->enableRegistration) {
        print "Registration is disabled";
        return;
    }
    $form = $this->registerForm;
    $form->prepare();
    $form->setAttribute('action', $this->basePath('/user/registermaskedemail') . $this->redirect);
    $form->setAttribute('method', 'post');
    $form->setAttribute('class', 'direct_reg_form');

    $phoneElement = $form->get('mobile');
    $phoneElement->setAttribute('required', false);

}
?>

<div id="content" class="register-page">
    <div class="container">
        <div class="row">
            <div id="regiterContainer">
                <?php if (!$this->zfcUserIdentity()) {
                    ?>
                    <h2>Register for a Free Trial!</h2>
                    <?php echo $this->form()->openTag($form) ?>
                    <input type="hidden" name="school_id_hidden" id="school_id_hidden" value="0" />
                    <div class="clearfix">
                        <div class="col-xs-12 col-sm-6 left-click">
                            <div class="clearfix">
                                <div class="registerleft">
                                    <span class="orBtn">OR</span>
                                    <input type="hidden" name="username" value="<?php
                                    if (isset($_SESSION['user']['username'])) {
                                        echo $_SESSION['user']['username'];
                                    }
                                    ?>"/>
                                    <input type="hidden" name="socialuser" id="socialuser" value="" />
                                    <?php
                                    $labelNotShowArr = array('display_name', 'school_name', 'school_email', 'email', 'mobile');
                                    $MarginReducedIds = array('user_type_id', 'gender');
                                    foreach ($form as $element):
                                        $profileFadeText = "profilefade";
                                        if($element->getAttribute('id') == 'user_type_id' || $element->getAttribute('id') == 'age_bar' )
                                            $profileFadeText = "";
                                        if($element->getAttribute('id') == 'mobile')
                                            $profileFadeText = "profilefade";
                                        ?>
                                        <div class="form-group clearfix <?php echo $profileFadeText; ?>" <?php echo ($element->getAttribute('id') == 'age_bar')?"id='certifyAge' style='display:none'":''; ?> >
                                            <?php
                                            if ($element instanceof Zend\Form\Element\Radio) {
                                                ?>
                                                <?php if ($element->getAttribute('name') == 'gender') { ?>
                                                    <p>Gender</p>
                                                <?php } elseif ($element->getAttribute('id') == 'age_bar') { ?>
                                                    <p>I certify that I am 13 years of age or older:</p>
                                                    <?php
                                                } elseif ($element->getAttribute('name') == 'user_type_id') {
                                                    ?>
                                                    <p>I am</p>
                                                    <?php
                                                }
                                                ?>
                                                <ul>
                                                    <li><div class="radio-box">
                                                            <?php
                                                            $radioValueOptions = $element->getValueOptions();
                                                            foreach ($radioValueOptions as $key => $value) {

                                                                $checked = '';
                                                                if($element->getAttribute('name') == 'user_type_id'){
                                                                    if($value['value'] == 1){
                                                                        $checked = "checked = 'checked'";
                                                                    }
                                                                }
                                                                if($element->getValue() == $value['value']){
                                                                    $checked = "checked = 'checked'";
                                                                }
                                                                ?>

                                                                <input class="<?php echo $element->getAttribute('class'); ?>" type="radio" 
                                                                       name="<?php echo $element->getName(); ?>" <?php echo $checked; ?>
                                                                       value="<?php echo $value['value'] ?>" 
                                                                       id="<?php echo $value['attributes']['id'] ?>" />

                                                                <label for="<?php echo $value['attributes']['id'] ?>" class="<?php echo $value['label_attributes']['class'] ?>"> <?php echo $value['label'] ?>
                                                                </label>

                                                                <?php
                                                            }

                                                            echo "<span class='errorMessage' id='errorMessage_" . $element->getAttribute('name') . "'>" . $this->formElementErrors($element) . "</span>"
                                                            ?>
                                                        </div>
                                                    </li>
                                                </ul>
                                                <?php if ($element->getAttribute('id') == 'age_bar') { ?>
                                                    <span id="age_msg" style="font-size: 14px;float: left;width:90%;color:red;"></span>
                                                <?php } ?>
                                                <?php if ($element->getAttribute('name') == 'gender') { ?>

                                                    <?php
                                                }
                                            } elseif (!$element instanceof Zend\Form\Element\Button) {

                                                if ($element->getAttribute('id') == 'mobile') {
                                                    ?>
                                                <div class="mobileDiv clearfix">
                                                    <span class="dropdown_reg_custom" >
                                                        <select  tabindex="3" id="phonecode" name="country_id" class="select-country">                                      
                                                            <?php
                                                            if (isset($countryData) && count($countryData) > 0) {
                                                                foreach ($countryData as $Countries) {
                                                                    
                                                                    //$checkSouthAfrica = strpos($_SERVER['SERVER_NAME'], 'localhost');
                                                                    if($southafricaLoaded === true && (strtoupper($Countries->getIso()) =='ZA' )){
                                                                        ?>
                                                                        <option value="<?php echo $Countries->getCountryId(); ?>" data-image="<?php echo $this->basePath() ?>/images/website/flags/<?php echo strtolower($Countries->getIso()) ?>_32.png" selected="selected">+<?php echo $Countries->getPhoneCode() ?></option>										
                                                                        <?php
                                                                        
                                                                    }else if ($southafricaLoaded === false && strtoupper($_SESSION['user_session_ip_country']) == strtoupper($Countries->getcountryname())) { ?>
                                                                        <option value="<?php echo $Countries->getCountryId(); ?>" data-image="<?php echo $this->basePath() ?>/images/website/flags/<?php echo strtolower($Countries->getIso()) ?>_32.png" selected="selected">+<?php echo $Countries->getPhoneCode() ?></option>										
                                                                        <?php
                                                                    }
                                                                    else {
                                                                        $selected = "";
                                                                        ?>
                                                                        <option value="<?php echo $Countries->getCountryId(); ?>" data-image="<?php echo $this->basePath() ?>/images/website/flags/<?php echo strtolower($Countries->getIso()) ?>_32.png" <?php echo $selected; ?> >+<?php echo $Countries->getPhoneCode() ?> 
                                                                            <?php
                                                                            $countryNamePhoneCode = $Countries->getnicename();
                                                                            $countryNamePhoneCode = str_replace(" and", "", $countryNamePhoneCode);
                                                                            $countryNamePhoneCode = str_replace("People's ", "", $countryNamePhoneCode);
                                                                            $countryNamePhoneCode = str_replace("the South Sandwich", "Sandwich", $countryNamePhoneCode);
                                                                            $countryNamePhoneCode = str_replace("United States Minor", "US Minor", $countryNamePhoneCode);
                                                                            $countryNamePhoneCodeArr = explode(",", $countryNamePhoneCode);
                                                                            echo $countryNamePhoneCodeArr[0];
                                                                            ?> 

                                                                        </option>
                                                                    <?php } ?>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>									
                                                        </select>
                                                    </span>
                                                    <?php echo $this->formInput($element); ?>
                                                </div>
                                                    <?php
                                                    echo "<span class='errorMessage' id='errorMessage_" . $element->getAttribute('name') . "'>" . $this->formElementErrors($element) . "</span>";
                                                    ?>
                                                <?php }else{ ?>    
                                                    
                                                <?php echo $this->formInput($element) . "<span class='errorMessage' id='errorMessage_" . $element->getAttribute('name') . "'>" . $this->formElementErrors($element) . "</span>" ?>
                                                <?php } ?>
                                                 
                                                <?php
                                            } elseif ($element instanceof Zend\Form\Element\Button) {
                                                ?>
                                                <div class="form-group clearfix profilefade">
                                                <p>Date of Birth:</p>
                                                <?php $month = array('1'=>'Jan'); ?>
                                                <ul class="DOB-register">
                                                <li class="clearfix">        
                                                    <div class="radio-box">
                                                        <select name="dob_month" id="dob_month" class="CostomSelect">
                                                            <option value="">Month</option>
                                                            <?php for($i=1;$i<=12;$i++) {
                                                               $monthName = date("M", mktime(0, 0, 0, $i, 10));
                                                            ?>
                                                            <option value="<?php echo $i; ?>"><?php echo $monthName; ?></option>
                                                            <?php } ?>
                                                        </select>
                                                        <select name="dob_day" id="dob_day" class="CostomSelect">
                                                            <option value="">Day</option>
                                                            <?php for($i=1;$i<=31;$i++){ ?>
                                                            <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
                                                            <?php } ?>
                                                        </select>
                                                        <select name="dob_year" id="dob_year" class="CostomSelect">
                                                            <option value="">Year</option>
                                                            <?php for($i=Date('Y');$i>Date('Y') - 70;$i--){ ?>
                                                            <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
                                                            <?php } ?>
                                                        </select>
                                                        <span id="errordob" class="errorMessage"></span>                                                        
                                                    </div>
                                                </li>
                                                </ul>                                   
                                                </div>
                                                <div class="register-botttom" <?php if($element->getAttribute('name') == 'submit') { echo " id ='create_account_old_position' "; } ?>>
                                                    <p><i></i>By creating account you have agreed to the <a href="<?php echo $this->basePath('terms-of-use') ?>" target="_blank">Terms of use.</a></p>
                                                    <?php echo $this->formButton($element) ?>
                                                </div>
                                            <?php } elseif ($element instanceof Zend\Form\Element\Captcha) {
                                                ?>
                                                <li><?php echo $this->formCaptcha($element) . $this->formElementErrors($element) ?></li>
                                                <?php
                                            }
                                            ?>
                                        </div>
                                        <?php
                                    endforeach;
                                    ?>
                                </div>
                                <div class="SelectArea">
                                    <div id="Ip_related_main_div" style="margin-bottom:15px;padding-top: 1px;">
                                        <p class ="country_info_heading">Based on your location, we found the following information <a  id="ip_change_button" onclick="return changeLocationDetails()" href="javascript:void(0);" tabindex="3">Change</a></p>        
                                        <ul class="country_info">
                                            <li><span class="country_info_label">Country:</span> <strong class="label_content"><?php echo isset($_SESSION['user_session_ip_country']) ? $_SESSION['user_session_ip_country'] : 'NA'; ?></strong></li>
                                            <li><span class="country_info_label">State:</span> <strong class="label_content"><?php echo isset($_SESSION['user_session_ip_state']) ? $_SESSION['user_session_ip_state'] : 'NA'; ?></strong></li>
                                            <li><span class="country_info_label">City:</span> <strong class="label_content"><?php echo isset($_SESSION['user_session_ip_city']) ? $_SESSION['user_session_ip_city'] : 'NA'; ?></strong></li>
                                        </ul>
                                        <input type="hidden" id="ip_tracking_country" name="ip_tracking_country" value="<?php echo $_SESSION['user_session_ip_country']; ?>" />
                                        <input type="hidden" id="ip_tracking_state" name="ip_tracking_state" value="<?php echo $_SESSION['user_session_ip_state']; ?>" />
                                        <input type="hidden" id="ip_tracking_city" name="ip_tracking_city" value="<?php echo $_SESSION['user_session_ip_city']; ?>" />

                                        
                                        <div class="form-group country_info_change profilefadeIP" id="ucountriesDiv">
                                            <select id="ucountries" class='CostomSelect' name="ucountries" disabled="disabled">
                                        <option value="">Country</option>
                                                <?php
                                                if (isset($this->countryData)) {
                                                    foreach ($this->countryData as $countryname) {
                                                        ?>
                                                        <?php if (strtoupper($_SESSION['user_session_ip_country']) == strtoupper($countryname->getcountryname())) { ?>
                                                            <option value="<?php echo $countryname->getcountryid(); ?>" selected="selected"><?php echo $countryname->getcountryname(); ?></option>
                                                        <?php } else { ?>
                                                            <option value="<?php echo $countryname->getcountryid(); ?>"><?php echo $countryname->getcountryname(); ?></option>
                                                            <?php
                                                        }
                                                    }
                                                }
                                                ?>
                                     </select>
                                            <span class="errorMessage" id="errorcountry" style="font-weight: normal; float: none;"></span>   
                                        </div>
                                        
                                        <div class="form-group country_info_change profilefadeIP" id="selectStates"><!-- form-group -->
                                            <select class='CostomSelect' id="states" name="states" disabled="disabled" style="width:287px;">
                                                <option value="">State</option>
                                                <?php if(isset($_SESSION['statelist']) ){foreach($_SESSION['statelist'] as $statenames){  ?>
                                                <?php if( strtoupper($_SESSION['user_session_ip_state']) == strtoupper($statenames->getStateName()) ){?>
                                                <option value="<?php echo $statenames->getStateId();?>" selected="selected"><?php echo strtoupper($statenames->getStateName());?></option>
                                                <?php }else{?>
                                                <option value="<?php echo $statenames->getStateId();?>"><?php echo strtoupper($statenames->getStateName());?></option>
                                                <?php }}}?>
                                             </select>
                                            <span class="errorMessage" id="errorstate" style="font-weight: normal; float: none;"></span>
                                        </div>
                                    
                                        <div class="form-group fadeHide country_info_change profilefadeIP">
                                            <input class="form-control" readonly="readonly" type="text" placeholder="Please enter your city name" id="city" name="city" value="<?php
                                            if ($this->ipCaptureDetails['city'] != '0') {
                                                echo $this->ipCaptureDetails['city'];
                                            }
                                            ?>"/>
                                        <span class="errorMessage" id="errorothercity" style="font-weight: normal; float: none;"></span>
                            </div>
                                    </div>
                                    
                                    <div class="select-board"> 
                                        <div class="form-group" id="board_select_dd">
                                            <select class="CostomSelect form-control" id="board1" name="board1">
                                                
                                                <?php
                                                $selectedBoardFlag = false;
                                                foreach ($boardList as $key => $value) {
                                                    $selectedBoard = "";
                                                    if ($_SESSION['register_board_id'] == $key) {
                                                        $selectedBoard = "selected = 'selected'";
                                                        $selectedBoardFlag = true;
                                                    }
                                                    ?>
                                                    <option value="<?php echo $key; ?>" <?php echo $selectedBoard; ?>><?php echo $value ?></option>
                                                <?php } ?>
                                                <?php
                                                foreach ($boardList as $key => $val) {
                                                    $selectedBoard = '';
                                                    if ($_SESSION['register_board_id'] == $key . "_")
                                                        $selectedBoard = "selected = 'selected'";

                                                    if ($val == 'ICSE') {
                                                        ?>
                                                        <option value="<?php echo $key . "_"; ?>" <?php echo $selectedBoard; ?>>Other</option>
                                                        <?php
                                                    }
                                                }
                                                ?>
                                            </select>
                                            <span id="errormessageBoardRegistration" class="errorMessage" style="font-weight: normal; float: none;"></span>
                                        </div>
                                        <div class="form-group" id="class_select_dd">
                                            <div id="selectClasses">
                                                <select class="CostomSelect form-control"  name="class1" id="class1" >
                                                    <?php if($southafricaLoaded === true){ ?>
                                                        <option value="">Select Grade</option>
                                                    <?php }else{ ?>
                                                        <option value="">Select Class</option>
                                                    <?php } ?>
                                                </select>
                                            </div>
                                            <span id="errormessageClassRegistration" class="errorMessage" style="font-weight: normal; float: none;"></span>

                                        </div>
                                        <div class="form-group">
                                            <div class="log-bx" id="otherboardclass" style="display:none; margin:15px 0">
                                                <div class="log-rhtbx">
                                                    <input id="otherboard" class="form-control" type="text" placeholder="Please enter other board" style="padding:3px 5px" name="otherboard" tabindex="13" value="<?php echo $_SESSION['other_board_session']; ?>" />
                                                    <span class="errorMessage" id="errorotherboard"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group clearfix" id="school_name_dd" style="position:relative;">
                                            <input type="text" placeholder="Please enter your school name" class="form-control" id="school_name" name="school_name" onkeyup="callFunctionSchoolName(1)">
                                            <img id="extramarks_school_logo" style="display:none;position:absolute;right:5px;top:5px;" src="<?php echo $this->basePath(); ?>/images/website/logo-25.png" width="15" />
                                            <div id="extramarks_school_content" style="display:none;background: none repeat scroll 0 0 #fff;border: 1px solid #333;padding: 10px;"></div>
                                            <span id="errorMessage_school_name" class="errorMessage" style="font-weight: normal; float: none;"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <?php echo $this->form()->closeTag() ?> 
                            <div class="register-botttom" style="text-align:center; margin:10px 0;" id="create_account_new_position"></div>
                            
                        </div>
                        <div class="col-xs-12 col-sm-6 right-click">
                            <div class="registerright">
                                <h3>Sign in to Extramarks Live with</h3>
                                <div class="social_icon">
                                    <?php
                                    foreach ($socialOptions->getEnabledProviders() as $provider) {
                                        echo '' . $this->socialSignInButton($provider, $this->redirect) . '';
                                    }
                                    ?>
            <!--                                    <a href="#" class="facebook"><span class="icons-facebook"></span><strong>Facebook</strong></a>
                                    <a href="#" class="google"><span class="icons-google"></span><strong>Google</strong></a>
                                    <a href="#" class="twitter"><span class="icons-twitter"></span><strong>Twitter</strong></a>-->
                                </div>	
                            </div>	
                        </div>	
                    </div>
                    <?php
                }
                ?>

            </div>
        </div>
    </div>
</div>
<!-- OLD HTML -->

<?php if (($this->zfcUserIdentity()) && ($userObj->getUserTypeId() == 1 || $userObj->getUserTypeId() == 3 || $userObj->getUserTypeId() == 2)) { ?>


    <!-- student pop-up first Time -->


    <?php if ($userObj->getUserTypeId() == 1 || $userObj->getUserTypeId() == 3) { ?>
        <!-- Student pop-up starts --> 
        
<div class="register_overlay" style="display:block;"></div>
<div class="modal addchild-popup" id="loginDetails" style="display:block;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
         <h4 class="modal-title" id="exampleModalLabel"> Your Login Details</h4>
      </div>
    <div class="modal-body">
 <form class="form-horizontal">
  <div class="form-group successMessage" >
    <label for="inputEmail3" class="col-sm-2 control-label" style="padding-top: 0px; color: #1f2532">Login ID</label>
    <div class="col-sm-10 padd-right">
        <?php echo $userObj->getEmail(); ?>
    </div>
  </div>
  <div class="form-group successMessage" >
    <label for="inputEmail3" class="col-sm-2 control-label" style="padding-top: 0px; color: #1f2532"">Password</label>
    <div class="col-sm-10 padd-right">
        <?php echo $password; ?>
    </div>
  </div>
   <?php if($userObj->getUserTypeId()==1 ){ ?>    
  <div class="form-group clearfix successMessage" style="margin-bottom: 0">
      <button type="button" class="btn btn-warning" style="float: right; margin-right: 15px;" onclick="closePopupLoginDetails(<?php echo $userObj->getId(); ?>,<?php echo $userObj->getUserTypeId(); ?>,'<?php echo $redirect; ?>');">OK</button>	 
      
      </div>
      <?php } ?>
      <?php if( $userObj->getUserTypeId()==3) { ?>
     <div style="margin-bottom: 0" class="form-group clearfix successMessage">
<!--      <button data-whatever="@mdo" data-target="#inviteLearner" data-toggle="modal" class="btn btn-warning" type="button" style="float: right; margin-right: 15px;">Invite learner</button>-->
      <button data-whatever="@mdo" data-target="#inviteLearner" data-toggle="modal" class="btn btn-warning" type="button" style="float: right; margin-right: 15px;">Add learner</button>
      <a onclick="remindletermentor('1');" href="javascript:void(0)" style="float: right; margin-right: 15px;" class="btn btn-warning">Remind me later</a>
     </div>
     
        <?php } ?>
  

  </form>
      </div>
    </div>
  </div>
</div>
 

<div class="modal fade" id="inviteLearner" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
 
<div class="modal-dialog">
    <div class="modal-content">
         <div class="modal-header clearfix">
             <span id="close_add_learner" aria-hidden="true" class="close" data-dismiss="modal" aria-label="Close">&times;</span>
        <h4 class="modal-title" id="exampleModalLabel">Add Learner </h4>
      </div>
        <div class="modal-body">
         <form id="formB" method="post" class="form-horizontal">
       	   <div class="form-group">
            <label for="cname" class="col-sm-3 control-label">Email Id:<sup>*</sup></label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="invited_email" id="invited_email">
               <span class="valid-error" id="erroremailcheck"></span>
            </div>
           </div>

         </form>
      </div>
        
        <div class="modal-footer clearfix">
            <div class="form-group">
                <div class="" style="text-align:left"><span style="color: green; display:none;text-align:left" id="success_msg"></span></div>
            </div>
       <button class="btn btn-warning" id="check_learner_email_button" onclick="return checkLearnerEmail()" type="button">Submit</button>
       <button class="btn btn-warning" id="invite_learner_start" onclick="return inviteLearnerData()" style="display:none;" type="button">Yes</button>
       <button class="btn btn-warning" id="remind_me_later_button" onclick="remindletermentor('1');" style="display:none;" type="button">Remind me later</button>
       
       
      </div>
    </div>
  </div>
</div>


<?php echo $this->partial('zfc-user/user/addlearnerpopup.phtml', array('boardList' => $boardList )); ?>

 <script>
    $(document).ready(function(){
        setTimeout(function(){
            $('#loginDetails').modal('show');
        },100)
    });
    
</script>
    <?php } ?>

    <!-- Parent Pop-up -->

    <?php if ($userObj->getUserTypeId() == 2) { ?>
<div class="register_overlay" style="display:block;"></div>
<div class="modal custom-lightbox addchild-popup" id="AddChildPopupLogin" style="display:block;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        
        <h4 class="modal-title" id="exampleModalLabel"> Your Login Details
        
        </h4>
      </div>
    <div class="modal-body">
 <form class="form-horizontal">
  <div class="form-group successMessage" >
    <label for="inputEmail3" class="col-sm-2 control-label" style="padding-top: 0px;">Login ID<sup>*</sup></label>
    <div class="col-sm-10 padd-right">
        <?php echo $userObj->getEmail(); ?>
    </div>
  </div>
  <div class="form-group successMessage" >
    <label for="inputEmail3" class="col-sm-2 control-label" style="padding-top: 0px;">Password<sup>*</sup></label>
    <div class="col-sm-10 padd-right">
        <?php echo $password; ?>
    </div>
  </div>
   
  <div class="form-group clearfix successMessage" style="text-align:right;">
<!--      <button type="button" class="btn btn-primary" onclick="addPopup('1')">Add Child</button>	 -->
      <button type="button" class="btn btn-warning" onclick="remindleter('1');" data-toggle="modal" data-whatever="@mdo" style="float: right; margin-right: 15px;">Remind me later</button>
      <button style="float: right; margin-right: 15px;" type="button" class="btn btn-warning" data-toggle="modal" data-target="#addchild" data-whatever="@mdo">Add Child</button>
      
     
  </div>

  </form>
      </div>
    </div>
  </div>
</div>


          


<?php echo $this->partial('user/index/childpopup.phtml', array('boardList' => $boardList , 'countries' => $this->countryData ,'states' => $stateList ,'userCountryId' => $res['countryID'] , 'userStateId' => $res['stateID'] ,'userCity' => $res['cityValue'])); ?>


        


        <div style="display: none;" id="childlink-popup" class="childlink-box sign-box">
            <input type="hidden" name=skipbut" id="skipbut" value=''/> 
            <form name="linkchild" id="linkchild" method="post">
        <!--            <span id="skip1" style="display: none;"><a onclick="closeChildPopup(1,<?php echo $userObj->getId(); ?>);" style="margin-right: 8px;margin-top:7px;" id="close_button" href="javascript:void(0)"></a></span>
                 <span id="skip2" style="display: none;"><a onclick="closeChildPopup('');" style="margin-right: 8px;margin-top:7px;" id="close_button" href="javascript:void(0)"></a></span>             -->
                <span id="skip1"><li style="margin:10px; float:right;"><a id="various1" style="color:#969696 !important" onclick="addPopup('1')" href="#"> Add Child</a></li></span>
                <h1 class="childlink_popup_margin">Link Child</h1>            
                <span class="green-color" id="success_msg_link_child"></span>
                <div class="prefer">
                    <div class="log-bx">
                        <div class="log-lftbx" style="padding-left:15px;width: 17%">Child  Email:<span>*</span></div>
                        <div class="log-rhtbx">
                            <input type="text" name="linkChildUserId" id="linkChildUserId" value=""/>
                            <span class="valid-error" id="errorlinkChildUserId"></span>
                        </div>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="register_conf_button_h">
                    <div style="float:right; margin-top:10px; margin-right:10px;">
                        <a class="register" id="various1" style="margin-right:10px; float:left;" onclick="return linkChildData('<?php echo $_SERVER['HTTP_HOST'] ?>', 'add', 0)" href="javascript:void(0);" tabindex="3"> <div class="logins">Save & Add More</div></a>
                        <a class="register" id="various1" style="margin-right:10px; float:left;" onclick="return linkChildData('<?php echo $_SERVER['HTTP_HOST'] ?>', 'save', 0)" href="javascript:void(0);" tabindex="3"> <div class="logins">Save & Continue</div></a>
                        
                    </div>
                </div>
            </form>
        </div>
<script>
    $(document).ready(function(){
        setTimeout(function(){
            $('#AddChildPopupLogin').modal('show');
        },100)
    });
    
</script>
    <?php } ?>

    <script type='text/javascript'>
        //        $("#regiterContainer").html('<div class="ajaxloader" style="height:300px;"> Please wait while we redirect to your profile!</div>');
        $("#regiterContainer").html('<div class="ajaxloader" style="height:300px;font-size:16px;text-align:center;"></div>');

    </script>

<?php } ?> 

<?php 
if($southafricaLoaded === true){
    echo "<script> var selectClassString = 'Select Grade'; var errorBoardString = 'curriculum'; var errorClassString = 'grade'; </script>";
?>
    <script>
        var userType1Obj = $(".radio-box").find('.css-label').get(0);
        var userType1Text = $(userType1Obj).text();
        if(   $.trim(userType1Text) == 'Student' ){
            $(userType1Obj).text('Learner');
        }
    </script>
        
    <?php
    
}else{
    
    ?>
    <script>
        var userType1Obj = $(".radio-box").find('.css-label').get(0);
        var userType1Text = $(userType1Obj).text();
        if(   $.trim(userType1Text) == 'Learner' ){
            $(userType1Obj).text('Student');
        }
    </script>
        
    <?php
    
    echo "<script> var selectClassString = 'Select Class'; var errorBoardString = 'board'; var errorClassString = 'class';  </script>";
}

?>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/jquery.dd.js"></script>

<script type='text/javascript'>
    $(".dropdown_reg_custom select").msDropDown();
    function changeLocationDetails() {
        if ($("#ip_change_button").html() == 'Change') {
            $("#ucountries").attr('disabled', false);
            $("#states").attr('disabled', false);

            // state
            var state_change = $("#ip_tracking_state").val().toUpperCase();
            $('#states option').filter(function(indexnew) {
                return $(this).text().toUpperCase() === state_change.toUpperCase();
            }).prop('selected', true);

            // country
            var country_change = $("#ip_tracking_country").val();
            $('#ucountries option').filter(function(index) {
                return $(this).text() === country_change;
            }).prop('selected', true);

            $("#city").val($("#ip_tracking_city").val().toUpperCase());
            $("#city").attr('readonly', false);
            $("#ip_change_button").html('DO NOT CHANGE');
            $(".profilefadeIP").css('opacity', '1');
            $(".profilefadeIP").show('slow');
            $(".country_info").hide('slow');
            $(".country_info_heading").hide('slow');
            $("#change_location_button").hide('slow');

        }
        
    }

    $(".profilefadeIP").hide();

    if ($("#ip_tracking_state").val() == '0' || $("#ip_tracking_city").val() == '0') {
        $("#ucountries").attr('disabled', false);
        $("#states").attr('disabled', false);
        $("#city").attr('readonly', false);
        $("#ip_change_button").html('DO NOT CHANGE');
        $(".profilefadeIP").show();
        $(".country_info").hide();
        $(".country_info_heading").hide();
        $("#change_location_button").hide();
    }
    function addPopup(id) {

        if (id == '1') {
            $('#redirect').css('display', 'block');
            $('#redirecthere').css('display', 'block');
            $('#childlink-popup').hide();
        } else {
            $('#noredirect').css('display', 'block');
            $('#noredirecthere').css('display', 'block');
        }
        $("#addChildPopup").show();
        $("#addchild-popup").show();

        $("#addchild-popup").css("height", "auto");
        $("#ChildDetailPopup").hide();
        $(".register_conf_button").hide();
        $('#childlink-popup').hide();
    }


    $(document).ready(function() {
        $("#school_email_dd").hide();
        $("#school_name").val('<?php echo $maskedEmailData->getSchoolName(); ?>');
        $("#school_email").val('<?php echo $maskedEmailData->getSchoolEmLiveId(); ?>');
        var selectedOption = $("#boardChild").find(":selected").text();

        $("#boardChild").next(".holders").text(selectedOption);
        var selectedOption = $("#classChild").find(":selected").text();

        $("#classChild").next(".holders").text(selectedOption);

        $("#boardChild").change(function() {
            var optionString = '<option value="">Select Class</option>';
            $("#classChild").html(optionString);
            $("#otherboardChildclass").hide();
            if (($("#boardChild :selected").text()) == "Other") {
                $("#otherboardChildclass").show();
            }
            $("#classChild").parent().find(".holders").text("");
            $("#classChild").parent().find(".holders").text("Select Class");
            if ($(this).val()) {
                $.ajax({type: 'POST',
                    url: BASE_URL + "/lms/index/containerlist/" + $(this).val(),
                    dataType: 'json',
                    success: function(data) {
                        var optionString = '<option value="">Select Class</option>';
                        $("#classChild").html(optionString);

                        $.each(data.options, function(key, obj)
                        {
                            optionString += '<option value="' + obj.rack_id + '">' + obj.rack_name + '</option>';

                        })
                        $("#classChild").html(optionString);

                    }
                });
            }

        });

        
        $("#ucountriesChild").change(function() {
            $("#stateChild").parent().find(".holders").text("");
            $("#stateChild").parent().find(".holders").text("Select a state");
            var countryid = $("#ucountriesChild").val();
            $.ajax({
                type: 'POST',
                url: BASE_URL + '/user/getstates',
                data: {countryid: countryid},
                success: function(data) {
                    $("#stateChild").html(data.statenames);
                }
            });
        });

    });


    $("#phonecode").change(function() {
        var selectedPhoneCode = $("#phonecode option:selected").text();
        var selectedPhoneCodeArr = selectedPhoneCode.split(" ");
        $('select option:contains(' + selectedPhoneCode + ')').text(selectedPhoneCodeArr[0]);
    });
    

</script>
<script type="text/javascript" src="<?php echo $this->fileversion($this->basePath().'/js/website/userRegister.js'); ?>"></script>
